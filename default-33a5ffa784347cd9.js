!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="71e37647-a778-44e1-9b97-1ba311e687b6",e._sentryDebugIdIdentifier="sentry-dbid-71e37647-a778-44e1-9b97-1ba311e687b6")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[691],{44843:function(e,t,l){Promise.resolve().then(l.bind(l,53551)),Promise.resolve().then(l.bind(l,61153))},53551:function(e,t,l){"use strict";l.d(t,{SidebarView:function(){return ef}});var a=l(37821),r=l(58078),s=l(25260),n=l(39565),i=l(26262),o=l(14233),d=l(74703),c=l(27624),u=l(75380),x=l(17363),m=l(59264),g=l(11696);function h(e,t){return(0,g.l)(l=>{"public"===e.visibility?l.pathname=b(e,t):l.pathname="/c/".concat(e.site_id),l.searchParams.set("b",e.id)})}function b(e,t){let l="/@".concat(t,"/").concat(e.slug);return"profile"===e.slug&&(l="/@".concat(t)),l}var f=l(17344),p=l(61153);let v=new Intl.DateTimeFormat("en",{year:"numeric",month:"long",day:"numeric"});function k(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function j(e,t){let l=new Date(t);return l.setDate(l.getDate()-1),e.getDate()===l.getDate()&&e.getMonth()===l.getMonth()&&e.getFullYear()===l.getFullYear()}var y=l(35764),N=l(78781),w=l(12306),C=l(60665),D=l(57893),_=l(82125),T=l(32159),Z=l(51146),E=l(53644),S=l(80389),I=l(77391);function P(e,t){return t=t.replace(/-$/g,""),(e.slice(0,50-t.length)+t).replace(/--+/g,"-")}let L=E.z.object({id:E.z.string(),title:E.z.string().min(1)}).and(E.z.object({visibility:E.z.literal("private").optional().default("private")}).or(E.z.object({visibility:E.z.literal("public"),slug:E.z.string().min(3).max(50).regex(/^[a-zA-Z0-9-]+$/,"Invalid slug")})));function O(e){null==e||e.dispatchEvent(new SubmitEvent("submit",{cancelable:!0,bubbles:!0}))}let R=e=>{let{className:t="",...l}=e;return(0,a.jsx)("label",{className:"text-sm font-semibold block mb-1 dark:text-neutral-100 ".concat(t),...l})},z=e=>{let{className:t="",...l}=e;return(0,a.jsx)("div",{className:"flex flex-col gap-1 ".concat(t),...l})},F=e=>{let{className:t,...l}=e;return(0,a.jsx)("input",{className:"\n        border border-gray-200 dark:border-neutral-700 rounded-md\n        dark:bg-neutral-800 dark:text-white\n        px-2 w-full text-sm\n        h-8\n        aria-invalid:border-red-500\n        ".concat(t,"\n      "),...l})},M=function(e){var t;let{className:l,bookmark:s,username:i,formRef:d,formElementRef:m}=e,{data:g}=(0,x.S7)(),f=(0,r.useMemo)(()=>g||[],[g]),p=(0,c.Wo)(),v=(0,c.Iq)(),k=s.site_id===v,j=(0,x.CQ)(),[y,E]=(0,w.cI)({onValidate(e){let{formData:t}=e;return(0,D.P)(t,{schema:L})},defaultValue:s,shouldValidate:"onInput",onSubmit(e,t){let{formData:l}=t;e.preventDefault();let a=L.parse(Object.fromEntries(l.entries()));j.mutateAsync({...a,id:s.id})}});y&&(d.current=y);let M=(0,r.useMemo)(()=>(function(e,t){let l=e.title.toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/--+/g,"-").replace(/^-|-$/g,"").slice(0,50),a=l.replace(/-\d+$/,"");if(!t.some(t=>t.id!==e.id&&l===t.slug))return l;let r=1;for(;t.find(e=>e.slug===P(a,"-".concat(r)));)r++;return P(a,"-".concat(r))})(s,f),[f,s]),Y=(null==p?void 0:p.title.trim())!==(null===(t=E.title.value)||void 0===t?void 0:t.trim()),q=M!==s.slug,[B,A]=(0,r.useState)(Y),[K,V]=(0,r.useState)(q);B!==Y&&A(Y),K!==q&&V(q);let $=(0,x.LP)();return(0,a.jsxs)("form",{autoComplete:"off",className:l,ref:m,onKeyDown:e=>{if(e.defaultPrevented)return},...(0,C.si)(y),children:[(0,a.jsxs)("div",{className:"flex flex-1 p-2 items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm font-semibold px-2 dark:text-neutral-100",children:"Edit Bookmark"}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(N.u,{content:"Delete Bookmark",children:(0,a.jsx)("button",{role:"checkbox",tabIndex:-1,"aria-label":"delete bookmark","aria-checked":k,className:"\n                pointer-events-auto\n                w-5 h-5\n                flex items-center justify-center rounded-sm\n                disabled:opacity-50\n                hover:bg-gray-200\n                dark:hover:bg-neutral-700\n              ",onClick:async()=>{await $.mutateAsync(s.id)},children:(0,a.jsx)(_.Z,{className:"w-4 h-4\n                stroke-red-500\n                dark:stroke-teal-200\n            "})})}),(0,a.jsx)(N.u,{content:k?"Updated!":"Update bookmark to current page",children:(0,a.jsx)("button",{disabled:!v||(0,u.kM)(v)||k,role:"checkbox","aria-label":"update bookmark","aria-checked":k,className:"\n                pointer-events-auto\n                w-5 h-5\n                flex items-center justify-center rounded-sm\n                [&:not(:aria-checked)]:bg-gray-100\n                [&:not(:aria-checked)&:hover]:bg-gray-200\n                [&:not(:aria-checked)&:disabled]:opacity-50\n                group\n              ",onClick:async()=>{v&&(await j.mutateAsync({id:s.id,site_id:v}),(0,I.Me)(s.id))},children:(0,a.jsx)(n.Z,{className:" w-4 h-4 dark:text-neutral-200 group-aria-checked:stroke-yellow-400 group-aria-checked:fill-yellow-400 dark:group-aria-checked:stroke-sky-400 dark:group-aria-checked:fill-sky-400 "})})})]})]}),(0,a.jsx)("hr",{className:"botder border-t border-gray-200 dark:border-neutral-700"}),(0,a.jsx)("input",{type:"hidden",name:"id",value:s.id}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,a.jsxs)(z,{children:[(0,a.jsx)(R,{htmlFor:E.title.id,children:"Title"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(F,{className:B?"pr-6":"",onChange:e=>{A(e.currentTarget.value.trim()!==(null==p?void 0:p.title.trim()))},onBlur:e=>{var t;e.currentTarget.value=e.currentTarget.value.trim(),e.currentTarget.value!==(null===(t=s.title)||void 0===t?void 0:t.trim())&&y.valid&&O(m.current)},...(0,C.TC)(E.title,{type:"text"})}),B&&(null==p?void 0:p.title)&&v===s.site_id?(0,a.jsxs)("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:()=>{m.current.elements.namedItem("title").value=p.title.trim(),A(!1),y.valid&&O(m.current)},children:[(0,a.jsx)(T.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Reset title to site title"})]}):null]}),E.title.errors?(0,a.jsx)("div",{className:"text-sm text-red-600",children:E.title.errors.join(", ")}):null]}),(0,a.jsxs)(z,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(R,{className:"mb-1",htmlFor:E.visibility.id,children:"Publish"}),(0,a.jsx)(S.r,{onChange:e=>{if(e.target.checked){let e=m.current.elements.namedItem("slug");e.value||(e.value=M,V(!1))}y.validate(),y.valid&&O(m.current)},...(0,C.TC)(E.visibility,{type:"checkbox",value:"public"})})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-neutral-400",children:"Makes this bookmark visible to everyone with the link configured below."}),E.visibility.errors]}),(0,a.jsxs)(z,{className:"public"===E.visibility.value||"public"===s.visibility?"":"opacity-50 pointer-events-none",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)(R,{htmlFor:E.slug.id,children:"Link"}),(0,a.jsx)("div",{className:"flex gap-4 items-center",children:"public"===s.visibility&&(0,a.jsxs)("a",{href:"".concat(window.location.origin).concat(b(s,i)),className:"text-sm flex gap-1 items-center text-blue-500",onClick:e=>{e.altKey||e.ctrlKey||e.metaKey||0!==e.button||(e.preventDefault(),navigator.clipboard.writeText("".concat(window.location.origin).concat(b(s,i))))},children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4"}),"Copy Link"]})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(F,{readOnly:"public"!==E.visibility.value&&"public"!==s.visibility,placeholder:M,className:K?"pr-6":"",onChange:e=>{(function(e,t){let l=e.selectionStart,a="";for(let r=0;r<e.value.length&&a.length<t.maxLength;r++)t.mask.test(e.value[r])?a+=e.value[r]:l&&r<l&&l--;e.value=a,l&&e.setSelectionRange(l,l)})(e.currentTarget,{mask:/[a-zA-Z0-9-]/,maxLength:50}),V(e.currentTarget.value!==M)},onBlur:e=>{e.currentTarget.value!==s.slug&&y.valid&&O(m.current)},...(0,C.TC)(E.slug,{type:"text"})}),K&&("public"===E.visibility.value||"public"===s.visibility)?(0,a.jsxs)("button",{type:"button",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:e=>{m.current.elements.namedItem("slug").value=M,V(!1),y.validate(),y.valid&&O(m.current)},children:[(0,a.jsx)(T.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Reset link"})]}):null]}),(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)(o.default,{href:h(s,i),className:"text-gray-500 [a&]:text-blue-500 text-xs flex items-center gap-0.5 truncate",children:(0,a.jsxs)("div",{className:"truncate",children:["websim.ai",b(s,i)||"public"!==s.visibility&&M]})})}),E.slug.errors?(0,a.jsx)("div",{className:"text-sm text-red-600",children:E.slug.errors.join(", ")}):null]}),(0,a.jsx)("button",{className:"sr-only",children:"Save"})]})]})};var Y=l(64722),q=l(90168),B=l(84578),A=l.n(B),K=l(4387),V=l(87202);let $=e=>{let{bookmark:t,profile:l}=e,s=(0,c.Iq)()===t.site_id,{ref:n,width:i}=(0,d.Z)(),u=(0,r.useMemo)(()=>h(t,l.username),[t,l]),x=(0,r.useContext)(f.Ec),m=(0,I.ye)()===t.id,g=(0,q.useRouter)(),{attributes:p,listeners:v,setNodeRef:k,isDragging:j,transform:y}=(0,V.O1)({id:"bookmarkList".concat(t.site_id),data:{id:t.site_id,source:"bookmarkList"}});return K.ux.Transform.toString(y),(0,a.jsxs)("li",{ref:k,...p,...v,className:"flex group",children:[(0,a.jsxs)(o.default,{href:u,className:"\n          min-w-0\n          flex-1 flex flex-col gap-1 p-2\n          bg-gray-100 rounded-lg\n          dark:bg-neutral-800\n          aria-selected:ring-2 aria-selected:ring-blue-300\n        ","aria-current":s?"page":void 0,"aria-selected":m?"true":"false",onClick:e=>{e.preventDefault(),g.push(u),A()()&&(0,I.nP)(!1)},children:[(0,a.jsx)("div",{className:"truncate text-sm",style:{paddingRight:i},children:t.title}),"public"===t.visibility?(0,a.jsx)("div",{className:"text-gray-500 dark:text-neutral-500 text-xs flex items-center gap-0.5 truncate",children:(0,a.jsxs)("div",{className:"truncate",children:["websim.ai",b(t,l.username)]})}):null]}),(0,a.jsx)("div",{className:"w-0 flex justify-end",children:(0,a.jsx)("div",{ref:n,className:"flex gap-2 p-2 pointer-events-none ".concat(l.id===(null==x?void 0:x.id)?"":"hidden"),children:(0,a.jsx)(Q,{bookmark:t,profile:l})})})]})},Q=e=>{let{bookmark:t,profile:l}=e,n=(0,r.useContext)(Y.fP),i=(0,I.fW)()===t.id,o=(0,r.useRef)(null),d=(0,r.useRef)(null);return A()()?(0,a.jsxs)(N.Vq.Root,{open:i,onOpenChange:e=>{e?(0,I.YD)(t.id):(0,I.YD)("")},children:[(0,a.jsx)(N.Vq.Trigger,{"aria-label":"edit bookmark",className:"\n              pointer-events-auto\n              w-5 h-5\n              flex items-center justify-center rounded-md\n              bg-blue-100 text-blue-600 hover:bg-blue-200\n            ",onClick:()=>{n("open_persist")},children:(0,a.jsx)("button",{children:(0,a.jsx)(s.Z,{className:"w-4 h-4"})})}),(0,a.jsx)(N.Vq.Content,{className:"p-0 dark:bg-neutral-900",children:(0,a.jsx)(M,{className:"flex flex-col inset-0",bookmark:t,username:l.username,formElementRef:d,formRef:o},t.id)})]}):(0,a.jsxs)(y.fC,{modal:!0,open:i,onOpenChange:e=>{e?(0,I.YD)(t.id):(0,I.YD)("")},children:[(0,a.jsx)(y.xz,{asChild:!0,"aria-label":"edit bookmark",className:"\n            opacity-0\n            group-hover:opacity-100\n            pointer-events-auto\n            w-5 h-5\n            flex items-center justify-center rounded-md\n            bg-blue-100 text-blue-600 hover:bg-blue-200\n          ",onClick:()=>{n("open_persist")},children:(0,a.jsx)("button",{children:(0,a.jsx)(s.Z,{className:"w-4 h-4"})})}),(0,a.jsx)(y.h_,{children:(0,a.jsxs)(y.VY,{className:"w-96",side:"right",sideOffset:30,onPointerDownOutside:e=>{let t=o.current;t&&t.dirty&&(t.validate(),t.valid&&O(d.current))},children:[(0,a.jsx)(y.Eh,{className:"fill-gray-300 dark:fill-neutral-900"}),(0,a.jsx)(M,{className:" flex flex-col rounded-lg bg-gray-100 dark:bg-neutral-900 ring-1 ring-gray-200/50 dark:ring-neutral-50/20 shadow-lg bg-clip-padding ",bookmark:t,username:l.username,formElementRef:d,formRef:o},t.id)]})})]})},W=e=>{var t;let{bookmarks:l,profile:s,currentBookmarkId:o}=e,d=(0,r.useContext)(f.Ec),g=(0,c.Wo)(),[h]=(0,r.useState)(()=>new Date),b=l.reduce((e,t)=>{let l;let a=new Date(t.updated_at);return e[l=k(a,h)?"Today":j(a,h)?"Yesterday":a.getDate()===h.getDate()-2?"2 days ago":a.getDate()===h.getDate()-3?"3 days ago":v.format(a)]||(e[l]=[]),e[l].push(t),e},{}),{mutateAsync:y}=(0,x.qM)(),w=(0,r.useContext)(p.Oq);return(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4 pb-2 absolute inset-0 overflow-y-auto ",children:[0===l.length&&(null==d?void 0:d.id)!==s.id&&(0,a.jsxs)("div",{className:"pt-12 text-center text-gray-500 text-sm",children:["@",s.username," has no public bookmarks."]}),0===l.length&&(null==d?void 0:d.id)===s.id&&(null===(t=w.userFilter)||void 0===t?void 0:t.username)===s.username&&(0,a.jsxs)("div",{className:" pt-12 text-center text-gray-500 text-sm dark:text-neutral-400 ",children:["No bookmarks yet! Click the"," ",(0,a.jsx)(n.Z,{className:"w-4 h-4 inline","aria-label":"add bookmark"})," ","button to save a bookmark"]}),Object.entries(b).map(e=>{let[t,l]=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-neutral-400 sticky top-0 px-2 -mx-2 bg-white dark:bg-neutral-900",children:t}),(0,a.jsx)("ul",{className:"flex flex-col gap-2",children:l.map(e=>(0,a.jsx)($,{bookmark:e,profile:s},e.id))})]},t)})]}),(null==d?void 0:d.id)===s.id&&(0,a.jsx)("div",{className:"absolute top-0 right-2",children:(0,a.jsx)(N.u,{content:"Add Bookmark",children:(0,a.jsx)("button",{disabled:!(null==g?void 0:g.id)||!(null==g?void 0:g.title)||(0,u.kM)(null==g?void 0:g.id),className:"w-6 h-6 flex items-center justify-center rounded-full bg-blue-500 hover:bg-blue-400 text-white","aria-label":"add bookmark",onClick:async()=>{if((null==g?void 0:g.id)&&(null==g?void 0:g.title)){let e=(0,m.A)();await y({site_id:null==g?void 0:g.id,title:null==g?void 0:g.title,id:e})}},children:(0,a.jsx)(i.Z,{className:"w-4 h-4"})})})})]})};var U=l(17713),H=l(64816),G=l(82366);let J=e=>{var t;let{currentBookmarkId:l,onSetCurrentBookmarkId:s}=e,n=(0,r.useContext)(p.Ev);(0,r.useContext)(f.Ec);let{data:i}=(0,x.S7)();(null!=i?i:[]).find(e=>e.id===l);let o=(0,r.useContext)(p.Q),d=(0,r.useContext)(p.sY),c=d.trim(),u=(0,r.useContext)(p.Oq),m=(null!==(t=u.textFilter)&&void 0!==t?t:"").trim(),g=(0,r.useMemo)(()=>(null!=i?i:[]).filter(e=>(0,G.R)(u,n,e)),[i,u,n]);return(0,a.jsx)("div",{className:"flex-1 flex flex-col gap-4 bg-white dark:bg-neutral-900 pt-4",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-col px-4",children:(0,a.jsxs)("div",{className:"relative flex",children:[(0,a.jsx)(U.Z,{className:"absolute top-3 left-3 w-5 h-5 text-gray-500 dark:text-neutral-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Search bookmarks","aria-label":"search bookmarks",className:" flex-1 h-11 pr-10 pl-10 text-sm rounded-lg border border-gray-200 dark:border-neutral-700 bg-gray-100 dark:bg-neutral-800 text-gray-800 dark:text-white ",value:d,onChange:e=>o(e.target.value),onBlur:()=>{o(c)},onKeyDown:e=>{e.defaultPrevented||"Escape"!==e.key||(e.preventDefault(),o(""))}}),""===m?null:(0,a.jsxs)("button",{"aria-label":"clear search",onClick:()=>o(""),className:"absolute top-2.5 right-2.5 w-6 h-6 flex items-center justify-center hover:bg-gray-100 rounded-full",children:[(0,a.jsx)(H.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Clear search"})]})]})}),n&&(0,a.jsx)(W,{bookmarks:g,profile:n,currentBookmarkId:l})]})})};var X=l(98448);function ee(){let[e,t]=(0,r.useState)(""),{data:l,error:s}=(0,X.k)();return s?(0,a.jsx)("div",{children:"Error retrieving history"}):(0,a.jsxs)("div",{className:"flex-1 flex flex-col gap-4 bg-white dark:bg-neutral-900",children:[(0,a.jsx)(et,{filterText:e,setFilterText:t}),(0,a.jsx)(el,{data:null!=l?l:[],filterText:e})]})}function et(e){let{filterText:t,setFilterText:l}=e;return(0,a.jsx)("div",{className:"flex flex-col px-4 pt-4",children:(0,a.jsxs)("div",{className:"relative flex",children:[(0,a.jsx)(U.Z,{className:"absolute top-3 left-3 w-5 h-5 text-gray-500 dark:text-neutral-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Search history","aria-label":"search history",className:" flex-1 h-11 pr-10 pl-10 text-sm rounded-lg border border-gray-200 dark:border-neutral-700 bg-gray-100 dark:bg-neutral-800 text-gray-800 dark:text-white ",value:t,onChange:e=>l(e.target.value),onKeyDown:e=>{e.defaultPrevented||"Escape"!==e.key||(e.preventDefault(),l(""))}}),""===t?null:(0,a.jsxs)("button",{"aria-label":"clear search",onClick:()=>l(""),className:"absolute top-2.5 right-2.5 w-6 h-6 flex items-center justify-center hover:bg-gray-100 rounded-full",children:[(0,a.jsx)(H.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Clear search"})]})]})})}function el(e){let{data:t,filterText:l}=e,r=(null!=t?t:[]).filter(e=>{var t,a;return(null===(t=e.url)||void 0===t?void 0:t.toLowerCase().includes(l.toLowerCase()))||(null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(l.toLowerCase()))}),s=new Date,n=r.reduce((e,t)=>{let l;let a=new Date(t.created_at);return e[l=k(a,s)?"Today":j(a,s)?"Yesterday":a.getDate()===s.getDate()-2?"2 days ago":a.getDate()===s.getDate()-3?"3 days ago":v.format(a)]||(e[l]=[]),e[l].push(t),e},{});return(0,a.jsx)("div",{className:"relative flex-1",children:(0,a.jsx)("div",{className:"absolute inset-0 overflow-y-auto flex flex-col gap-2 px-4 pb-2",children:Object.entries(n).map(e=>{let[t,l]=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-neutral-400 sticky top-0 px-2 -mx-2 pb-1 bg-white dark:bg-neutral-900",children:t}),l.map(e=>(0,a.jsx)(ea,{site:e},e.id))]},t)})})})}function ea(e){let{site:t}=e,l=(0,g.l)(e=>{e.pathname="/c/".concat(t.id)}),r="eval"!==t.method?t.command:t.url,s=(0,q.useRouter)();return(0,a.jsx)("li",{className:"flex group",children:(0,a.jsxs)(o.default,{href:l,className:"\n          min-w-0\n          flex-1 flex flex-col gap-1 p-2\n          bg-gray-100 rounded-lg\n          dark:bg-neutral-800\n          group-hover:opacity-70\n          aria-selected:ring-2 aria-selected:ring-blue-300\n          [span&]:opacity-50 [span&]:pointer-events-none\n        ",onClick:e=>{e.preventDefault(),s.push(l),A()()&&(0,I.nP)(!1)},children:[(0,a.jsx)("div",{className:"flex flex-row gap-4 text-xs truncate",children:t.title}),r!==t.url&&(0,a.jsx)("div",{className:"flex flex-row gap-4 text-xs truncate",children:r}),(0,a.jsx)("div",{className:"flex flex-row gap-4 text-xs text-gray-500 dark:text-neutral-500 whitespace-pre-line break-all",children:t.url})]})},t.id)}var er=l(56164),es=l(34714),en=l(59406),ei=l(65607),eo=l(23224),ed=l(84971);let ec=e=>{let{pinned:t,onPin:l,renderBookmarks:s,renderLikes:i,renderHistory:o,onClose:d,fullScreen:c}=e,u=(0,I.Tk)(),x=(0,r.useContext)(Y.fP);return(0,a.jsxs)("div",{className:"\n      shadow-xl bg-clip-padding\n      @container flex-1 flex flex-col\n      bg-gray-100\n      dark:bg-neutral-700\n      ring-1 ring-gray-200/50 dark:ring-neutral-50/20\n      z-10\n      ".concat(c?"":"rounded-lg","\n      overflow-y-auto\n    "),onClick:()=>{A()()||x("open")},children:[(0,a.jsxs)("div",{className:"flex space-between items-end",children:[(0,a.jsxs)("div",{className:"flex flex-1 items-center flex-row gap-0 h-12",children:[(0,a.jsx)(er.T,{className:"text-xl p-4 justify-center"}),(0,a.jsx)("div",{className:"flex-0 flex h-full items-center justify-center",children:!A()()&&(0,a.jsx)("button",{onClick:()=>{t?d():l()},className:" flex-0 hover:opacity-80 rounded-lg items-center justify-center px-4 py-2 text-gray-500 bg-gray-200 mt-[3px] dark:bg-neutral-500 dark:text-neutral-100 ",children:t?(0,a.jsx)(es.Z,{className:"w-4 h-4"}):(0,a.jsx)(en.Z,{className:"w-4 h-4"})})})]}),(0,a.jsxs)("div",{className:"flex-0 flex flex-row gap-2 pr-2",children:[(0,a.jsx)("button",{className:"".concat("bookmarks"===u?"bg-white dark:bg-neutral-900":"bg-gray-200 dark:bg-neutral-800"," flex-0 rounded-lg rounded-b-none px-3 pt-2 pb-1 hover:opacity-80"),onClick:()=>(0,I.$5)("bookmarks"),children:(0,a.jsx)(n.Z,{className:"w-5 h-5 mb-0"})}),(0,a.jsx)("button",{className:"".concat("likes"===u?"bg-white dark:bg-neutral-900":"bg-gray-200 dark:bg-neutral-800"," flex-0 rounded-lg rounded-b-none px-3 pt-2 pb-1 hover:opacity-80"),onClick:()=>(0,I.$5)("likes"),children:(0,a.jsx)(ei.Z,{className:"w-5 h-5 mb-0"})}),(0,a.jsx)("button",{className:"".concat("history"===u?"bg-white dark:bg-neutral-900":"bg-gray-200 dark:bg-neutral-800"," flex-0 rounded-lg rounded-b-none px-3 pt-2 pb-1 hover:opacity-80"),onClick:()=>(0,I.$5)("history"),children:(0,a.jsx)(eo.Z,{className:"w-5 h-5 mb-0"})}),(0,a.jsx)("div",{className:"flex-0 flex items-center justify-center pt-1",children:(0,a.jsx)(ed.zI,{})})]})]}),"bookmarks"===u?s():"likes"===u?i():o()]})},eu=e=>{let{like:t}=e,l=(0,c.Iq)(),s=l===t.site_id,{ref:n,width:i}=(0,d.Z)(),u=l===t.site_id,x=(0,q.useRouter)(),{attributes:m,listeners:h,setNodeRef:b,isDragging:f,transform:p}=(0,V.O1)({id:"likeList".concat(t.site_id),data:{id:t.site_id,source:"likeList"}});K.ux.Transform.toString(p);let v=(0,g.l)(e=>{e.pathname="/c/".concat(t.site_id)});return(0,r.createElement)("li",{ref:b,...m,...h,key:t.id,className:"flex group"},(0,a.jsx)(o.default,{href:v,className:"\n          min-w-0\n          flex-1 flex flex-col gap-1 p-2\n          bg-gray-100 rounded-lg\n          dark:bg-neutral-800\n          aria-selected:ring-2 aria-selected:ring-blue-300\n        ","aria-current":s?"page":void 0,"aria-selected":u?"true":"false",onClick:e=>{e.preventDefault(),x.push(v),A()()&&(0,I.nP)(!1)},children:(0,a.jsx)("div",{className:"truncate text-sm",style:{paddingRight:i},children:t.title||t.url})}))},ex=e=>{let{likes:t}=e,[l]=(0,r.useState)(()=>new Date),s=t.reduce((e,t)=>{let a;let r=new Date(t.created_at);return e[a=k(r,l)?"Today":j(r,l)?"Yesterday":r.getDate()===l.getDate()-2?"2 days ago":r.getDate()===l.getDate()-3?"3 days ago":v.format(r)]||(e[a]=[]),e[a].push(t),e},{});return(0,a.jsx)("div",{className:"relative flex-1",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4 pb-2 absolute inset-0 overflow-y-auto ",children:[0===t.length&&(0,a.jsxs)("div",{className:" pt-12 text-center text-gray-500 text-sm dark:text-neutral-400 ",children:["No likes yet! Click the"," ",(0,a.jsx)(ei.Z,{className:"w-4 h-4 inline","aria-label":"add like"})," ","button to save a like"]}),Object.entries(s).map(e=>{let[t,l]=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-neutral-400 sticky top-0 px-2 -mx-2 bg-white dark:bg-neutral-900",children:t}),(0,a.jsx)("ul",{className:"flex flex-col gap-2",children:l.map(e=>(0,a.jsx)(eu,{like:e},e.id))})]},t)})]})})};var em=l(75005),eg=l(77362);let eh=()=>{let{data:e}=function(){var e;let t=(0,em.$)(),l=(0,r.useContext)(f.Ec);return(0,eg.useQuery)({queryKey:[null!==(e=null==l?void 0:l.id)&&void 0!==e?e:"","likes"],queryFn:async()=>{var e;let a=await t.from("likes").select("id,created_at,user_id,site_id,...sites(title,url)").order("created_at",{ascending:!1}).eq("user_id",null!==(e=null==l?void 0:l.id)&&void 0!==e?e:"");if(a.error)throw a.error;return a.data},enabled:!!l})}(),[t,l]=(0,r.useState)(""),s=(0,r.useMemo)(()=>null==e?void 0:e.filter(e=>{var l,a;return(null===(l=e.title)||void 0===l?void 0:l.toLowerCase().includes(t.toLowerCase()))||(null===(a=e.url)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase()))}),[e,t]);return(0,a.jsx)("div",{className:"flex-1 flex flex-col gap-4 bg-white dark:bg-neutral-900 pt-4",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-col px-4",children:(0,a.jsxs)("div",{className:"relative flex",children:[(0,a.jsx)(U.Z,{className:"absolute top-3 left-3 w-5 h-5 text-gray-500 dark:text-neutral-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Search likes","aria-label":"search likes",className:" flex-1 h-11 pr-10 pl-10 text-sm rounded-lg border border-gray-200 dark:border-neutral-700 bg-gray-100 dark:bg-neutral-800 text-gray-800 dark:text-white ",value:t,onChange:e=>l(e.target.value),onBlur:()=>{l(t.trim())},onKeyDown:e=>{e.defaultPrevented||"Escape"!==e.key||(e.preventDefault(),l(""))}}),""===t?null:(0,a.jsxs)("button",{"aria-label":"clear search",onClick:()=>l(""),className:"absolute top-2.5 right-2.5 w-6 h-6 flex items-center justify-center hover:bg-gray-100 rounded-full",children:[(0,a.jsx)(H.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Clear search"})]})]})}),(0,a.jsx)(ex,{likes:null!=s?s:[]})]})})};var eb=l(73164);function ef(){let e=(0,eb.O9)(),t=(0,r.useContext)(f.Ec),l=(0,I.ye)(),s=(0,I.Tl)(),n=(0,r.useContext)(Y.fP);return t?(0,a.jsx)(ec,{fullScreen:e,pinned:s,onPin:()=>{(0,I.nP)(!0)},onClose:()=>{n("exited"),(0,I.nP)(!1)},renderBookmarks:()=>(0,a.jsx)(J,{currentBookmarkId:l,onSetCurrentBookmarkId:e=>{}},"sidebar"),renderLikes:()=>(0,a.jsx)(eh,{}),renderHistory:()=>(0,a.jsx)(ee,{})}):null}}},function(e){e.O(0,[552,71,393,419,341,793,835,115,362,744],function(){return e(e.s=44843)}),_N_E=e.O()}]);